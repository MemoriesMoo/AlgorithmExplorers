# 快速排序（`Quicksort`）详解

## 1. 简介

快速排序是一种高效的分治排序算法，由`Tony Hoare`于1960年提出。它以其优秀的性能和相对简单的实现而闻名。快速排序的基本思想是通过选择一个基准元素，将数组分为两部分，左边的元素都小于基准，右边的元素都大于基准，然后对左右两部分分别递归地进行排序，最终得到整个数组的有序序列。

## 2. 算法步骤

### 2.1 选择基准元素

从数组中选择一个元素作为基准。通常选择数组的第一个元素、最后一个元素或者随机位置的元素作为基准。

### 2.2 划分操作

通过一趟扫描，将数组分为两部分，左边的元素都小于基准，右边的元素都大于基准。这个过程称为划分操作。

### 2.3 递归排序

对基准左右的两个子数组递归地应用快速排序算法。递归结束的条件是子数组的大小为1或为空，因为单个元素或空数组都是有序的。

### 2.4 合并结果

由于每次递归都会将一个元素放到其最终位置，最终整个数组就是有序的。

## 3. 划分操作详解

划分操作是快速排序中的核心步骤。常用的实现方式是使用两个指针，一个指向当前处理的元素，另一个指向当前已经确定小于基准的元素的位置。具体步骤如下：

1. 初始化两个指针`i`和`j`，分别指向数组的第一个元素和最后一个元素。

2. 从数组的第一个元素开始，逐个检查元素与基准的大小关系。

3. 如果元素小于基准，将其与`i`指向的元素交换，并将`i`和`j`分别向后移动一位。

4. 如果元素大于基准，将其与`j`指向的元素交换，并将`j`向前移动一位。

5. 重复步骤3和步骤4，直到`i`和`j`相遇。

6. 将基准与相遇位置的元素交换，此时基准左边的元素都小于基准，右边的元素都大于基准。

## 4. 复杂度分析

- **时间复杂度：** 平均情况下为 `O(n log n)`，最坏情况下为 `O(n^2)`，但通过随机选择基准等方法可以避免最坏情况的发生。

- **空间复杂度：** `O(log n)`，主要用于递归调用的栈空间。

## 5. 算法特点

- 快速排序是原地排序算法，不需要额外的空间。

- 在大多数情况下，快速排序的性能比其他 `O(n log n)` 的排序算法更好，因为它具有良好的缓存性能。
